<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Warlock Simulator</title>
    <link href='https://fonts.googleapis.com/css?family=Roboto Mono' rel='stylesheet'>
    <script src="/WarlockSim/math.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.js"></script>
    <script src="/WarlockSim/simulator.js"></script>
    <script type="text/javascript">
      function startCode() {
        document.getElementById("page").innerHTML = "";
        //document.getElementsByClassName("loader")[0].style.display = "inline-block";
        setTimeout(function(){ runSim(); }, 10);
      }
      
      function startChart() {
        var dpsChart = new Chart(document.getElementById('dpsChart'), {
          type: 'line',
          data: {
            //labels: 0,
            datasets: [{
              label: "DPS Graph",
              //data: 0,
            }]
          },
          options: {
            scales: {xAxes: [{ticks: {autoSkipPadding: 3}}], yAxes: [{ticks: {beginAtZero: true, max: 1600} }] },
            animation: {duration: 0}
          }
        });
      }
      
      function talentFunc(click,element) {
        if (click == "left") {
          document.getElementById("testIcon").innerHTML = Number(document.getElementById("testIcon").innerHTML) + 1;
          element.style.filter = "grayscale(0%)";
        }
        else if (click == "right") {
          document.getElementById("testIcon").innerHTML = Number(document.getElementById("testIcon").innerHTML) - 1;
          if (document.getElementById("testIcon").innerHTML <= 0) {
            element.style.filter = "grayscale(100%)";
            document.getElementById("testIcon").innerHTML = 0;
          }
        }
      }
      
      function openPage(pageName,elmnt,color) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
          tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablink");
        for (i = 0; i < tablinks.length; i++) {
          tablinks[i].style.backgroundColor = "";
        }
        document.getElementById(pageName).style.display = "block";
        elmnt.style.backgroundColor = color;
      }
      setTimeout(function(){ 
        document.getElementById("defaultOpen").click(); 
        runSim(); 
      }, 10);
      Chart.defaults.global.defaultFontColor = 'black';
      //ocument.getElementById("main").addEventListener("input", runSim());
    </script> 
    <link rel="stylesheet" href="pageStyle.css">
  </head>
  <body style="background-color:#888888;">
    <button class="tablink" onclick="openPage('main', this, '#838383')" id="defaultOpen">Main</button>
    <button class="tablink" onclick="openPage('talent', this, '#838383')">Talents & Rotation</button>
    
    <div id="main" class="tabcontent" name="main" oninput="runSim();">
      <h1>Warlock Simulator <span style="font-size:16px">by Tesram-Mograine</span></h1>
      <div class="row">
        <div class="column left" style="background-color:#555555;">
          
          <h2>Settings</h2>
          <b>Gear Stats</b><br>
          <label style=color:#9482C9> <input type="number" id="spellPower" value="642">   Spell Power</label><br>
          <label style=color:#9482C9> <input type="number" id="spellCrit" value="8">      Spell Crit</label><br>
          <label style=color:#9482C9> <input type="number" id="spellHit" value="9">       Spell Hit</label><br>
          <label style=color:#9482C9> <input type="number" id="intellect" value="282">    Intellect</label><br>
          <label style=color:#9482C9> <input type="number" id="mp5" value="0">            Mana per 5</label><br>
          <br>

          <b>Debuffs</b><br>
          <label style=color:#9482C9> <input type="checkbox" id="curseShadow" checked>      Curse of Shadow</label><br>
          <label style=color:#9482C9> <input type="checkbox" id="shadowWeaving" checked>    Shadow Weaving</label><br>
          <label style=color:#f20000> <input type="checkbox" id="curseElements" checked>    Curse of the Elements</label><br>
          <label style=color:#f20000> <input type="checkbox" id="Scorch" checked>           Scorch</label><br>
          <br>

          <b>Spec</b><br>
          <select id="spec">
            <option value="DSRuin">DS/Ruin</option>
            <option value="SMRuin">SM/Ruin</option>
            <option value="DSES">DS/ES</option>
            <option value="SMDS">SM/DS</option>
          </select><br>
          <br>

          <b>Consumables</b><br>
          <label style=color:#9482C9> <input type="checkbox" id="supremeFlask" checked>     Flask of Supreme Power</label><br>
          <label style=color:#9482C9> <input type="checkbox" id="brilliantOil" checked>     Brilliant Wizard Oil</label><br>
          <label style=color:#9482C9> <input type="checkbox" id="arcaneElixir" checked>     Greater Arcane Elixir</label><br>
          <label style=color:#9482C9> <input type="checkbox" id="shadowElixir" checked>     Elixir of Shadow Power</label><br>
          <label style=color:#f20000> <input type="checkbox" id="fireElixir" checked>       Elixir of Fire Power</label><br>
          <br>
          
          <b>World Buffs</b><br>
          <label style=color:#9482C9> <input type="checkbox" id="hakkarBuff" checked>       Spirit of Zandalar</label><br>
          <label style=color:#9482C9> <input type="checkbox" id="onyxiaBuff" checked>       Rallying Cry of the Dragonslayer</label><br>
          <label style=color:#9482C9> <input type="checkbox" id="songflower" checked>       Songflower Serenade</label><br>
          <label style=color:#9482C9> <input type="checkbox" id="diremaulBuff" checked>     Dire Maul Tribute Buffs</label><br>
          <br>
          <button id="myButton" type="button" onclick="runSim();">Run Sim</button><br>
          <p id="finalStats"></p>

        </div>
        <div class="column right">
          <p id="dps"></p>
          <canvas id="dpsChart" style="background-color:#999999;" width=300px height=200px></canvas>
        </div>
        <div class="column right">
          <p id="statWeights"></p>
          <canvas id="statWeightChart" style="background-color:#999999;" width=300px height=200px></canvas>
        </div>
      </div>
    </div> <!--Main tab-->
    <div id="talent" class="tabcontent" name="talent" oninput="runSim();">
      <p>Pick your talents & rotation</p>
      <div class="row">
        <div class="column left" style="background-color:#555555;">
          <table class="center">
            <tr>
              <th colspan='4' style='text-align:center'>Affliction</th>
            </tr>
            <tr><td>   </td> 
                <td><div class="wrapper" onclick="talentFunc('left',this);" oncontextmenu="talentFunc('right',this); return false"><img id="talentSuppression" value=5 class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_unsummonbuilding.jpg" alt="T"><b id="testIcon" class="bottom-right">2</b></div></td>
                <td><div class="wrapper"><img id="talentCorruption" class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_abominationexplosion.jpg" alt="T"><b class="bottom-right">2</b></div></td> 
                <td>   </td>
            </tr>
            <tr><td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_curseofmannoroth.jpg" alt="T"></td>
                <td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_haunting.jpg" alt="T"></td>
                <td><img id="talentLifeTap" class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_burningspirit.jpg" alt="T"></td>
                <td><img id="talentDrainLife" class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_lifedrain02.jpg" alt="T"></td>
            </tr>
            <tr><td><img id="talentAgony" class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_curseofsargeras.jpg" alt="T"></td>
                <td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_fingerofdeath.jpg" alt="T"></td>
                <td><img id="talentAmpCurse" class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_contagion.jpg" alt="T"></td>
                <td>   </td>
            </tr>
            <tr><td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_callofbone.jpg" alt="T"></td>
                <td><img id="talentNightfall" class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_twilight.jpg" alt="T"></td>
                <td>   </td>
                <td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_siphonmana.jpg" alt="T"></td>
            </tr>
            <tr><td>   </td>
                <td><img id="talentSiphon" class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_requiem.jpg" alt="T"></td>
                <td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_grimward.jpg" alt="T"></td>
                <td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_grimward.jpg" alt="T"></td>
            </tr>
            <tr><td>   </td>
                <td><img id="talentShadowMastery" class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_shadetruesight.jpg" alt="T"></td>
                <td>   </td>
                <td>   </td>
            </tr>
            <tr><td>   </td>
                <td><img id="talentDarkPact" class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_darkritual.jpg" alt="T"></td>
                <td>   </td>
                <td>   </td>
            </tr>
          </table>
        </div>
        <div class="column left" style="background-color:#555555;">
          <table class="center">
            <tr>
              <th colspan='4' style='text-align:center'>Demonology</th>
            </tr>
            <tr><td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/inv_stone_04.jpg" alt="T"></td>
                <td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_summonimp.jpg" alt="T"></td>
                <td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_metamorphosis.jpg" alt="T"></td>
                <td>   </td>
            </tr>
            <tr><td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_lifedrain.jpg" alt="T"></td>
                <td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_summonvoidwalker.jpg" alt="T"></td>
                <td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_holy_magicalsentry.jpg" alt="T"></td>
                <td>   </td>
            </tr>
            <tr><td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_summonsuccubus.jpg" alt="T"></td>
                <td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_nature_removecurse.jpg" alt="T"></td>
                <td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_antishadow.jpg" alt="T"></td>
                <td>   </td>
            </tr>
            <tr><td>   </td>
                <td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_impphaseshift.jpg" alt="T"></td>
                <td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_shadowworddominate.jpg" alt="T"></td>
                <td>   </td>
            </tr>
            <tr><td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_enslavedemon.jpg" alt="T"></td>
                <td><img id"talentDemonicSacrifice" class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_psychicscream.jpg" alt="T"></td>
                <td>   </td>
                <td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/inv_ammo_firetar.jpg" alt="T"></td>
            </tr>
            <tr><td>   </td>
                <td>   </td>
                <td><img id="talentMasterDemon" class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_shadowpact.jpg" alt="T"></td>
                <td>   </td>
            </tr>
            <tr><td>   </td>
                <td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_gathershadows.jpg" alt="T"></td>
                <td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/inv_misc_gem_sapphire_01.jpg" alt="T"></td>
                <td>   </td>
            </tr>
          </table>
        </div>
        <div class="column left" style="background-color:#555555;">
          <table class="center">
            <tr>
              <th colspan='4' style='text-align:center'>Destruction</th>
            </tr>
            <tr><td>   </td>
                <td><img id="talentShadowBolt" class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_shadowbolt.jpg" alt="T"></td>
                <td><img id="talentCataclysm" class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_fire_windsofwoe.jpg" alt="T"></td>
                <td>   </td>
            </tr>
            <tr><td>   </td>
                <td><img id="talentBane" class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_deathpact.jpg" alt="T"></td>
                <td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_fire_fire.jpg" alt="T"></td>
                <td>   </td>
            </tr>
            <tr><td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_fire_firebolt.jpg" alt="T"></td>
                <td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_curse.jpg" alt="T"></td>
                <td><img id="talentDevastation" class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_fire_flameshock.jpg" alt="T"></td>
                <td><img id="talentShadowburn" class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_scourgebuild.jpg" alt="T"></td>
            </tr>
            <tr><td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_fire_lavaspawn.jpg" alt="T"></td>
                <td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_corpseexplode.jpg" alt="T"></td>
                <td>   </td>
                <td><img id="talentSearingPain" class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_fire_soulburn.jpg" alt="T"></td>
            </tr>
            <tr><td><img class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_fire_volcano.jpg" alt="T"></td>
                <td><img id="talentImmolate" class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_fire_immolation.jpg" alt="T"></td>
                <td><img id="talentRuin" class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_shadow_shadowwordpain.jpg" alt="T"></td>
                <td>   </td>
            </tr>
            <tr><td>   </td>
                <td>   </td>
                <td><img id="talentEmberstorm" class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_fire_selfdestruct.jpg" alt="T"></td>
                <td>   </td>
            </tr>
            <tr><td>   </td>
                <td><img id="talentConflagrate" class="talentIcon" src="https://wow.zamimg.com/images/wow/icons/large/spell_fire_fireball.jpg" alt="T"></td>
                <td>   </td>
                <td>   </td>
            </tr>
          </table>
        </div>
      </div>
    </div> <!--Talent tab-->
  </body>
</html>
